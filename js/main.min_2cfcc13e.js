var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(r,o){function a(t){try{c(n.next(t))}catch(e){o(e)}}function s(t){try{c(n["throw"](t))}catch(e){o(e)}}function c(t){t.done?r(t.value):new i(function(e){e(t.value)}).then(a,s)}c((n=n.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(r)throw new TypeError("Generator is already executing.");for(;c;)try{if(r=1,o&&(a=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[0,a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(n){i=[6,n],o=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var r,o,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},Block=function(t){function e(e){var i=t.call(this)||this;return i.txt="",i.successTxt="",i.col=1,i.row=1,i.type=1,i.type=e.type||1,i.txt=e.txt||"",i.id=e.id||"",i.col=e.col||1,i.row=e.row||1,i.successTxt=e.txt||"",i.init(),i}return __extends(e,t),e.prototype.init=function(){this.initBg(),this.initTxt(),this.anchorOffsetX=this.width/2,this.anchorOffsetY=this.height/2},e.prototype.initTxt=function(){this.txtLabel=new egret.TextField,this.addChild(this.txtLabel),this.txtLabel.width=this.width,this.txtLabel.height=this.height,this.txtLabel.size=38,this.txtLabel.textColor=2894892,this.txtLabel.textAlign="center",this.txtLabel.verticalAlign="middle",2==this.type?this.txtLabel.text="":5==this.type?(this.txtLabel.text=""+this.txt,this.txtLabel.textColor=16777215):4==this.type?(this.txtLabel.text=""+this.txt,this.txtLabel.textColor=16719872):this.txtLabel.text=""+this.txt},e.prototype.initBg=function(){switch(this.bg&&this.bg.parent&&this.bg.parent.removeChild(this.bg),this.bg=new egret.Shape,this.type){case 2:this.bg.graphics.beginFill(16777215),this.bg.graphics.lineStyle(4,723723);break;case 1:this.bg.graphics.beginFill(13948116),this.bg.graphics.lineStyle(4,723723);break;case 3:this.bg.graphics.beginFill(16773556),this.bg.graphics.lineStyle(4,723723);break;case 4:this.bg.graphics.beginFill(16773556),this.bg.graphics.lineStyle(4,723723);break;case 5:this.bg.graphics.beginFill(9097509),this.bg.graphics.lineStyle(4,723723),this.txtLabel.textColor=16777215;break;case 6:this.bg.graphics.beginFill(16777215),this.bg.graphics.lineStyle(4,15490857)}this.bg.graphics.drawRoundRect(0,0,70,70,6,6),this.addChildAt(this.bg,0)},e.prototype.changeType=function(t){this.type=t,this.initBg()},e.prototype.write=function(t){var e=3;this.changeType(e),this.id=t.id,this.txt=t.txt,this.txtLabel.text=""+this.txt,this.txtLabel.textColor=2894892},e.prototype.empty=function(t){var e=2;this.changeType(e),this.txt="",this.txtLabel.text=""},e.prototype.isSuccess=function(){return this.successTxt==this.txt},e.prototype.success=function(){this.changeType(5)},e.prototype.fail=function(){this.changeType(4),this.txtLabel.textColor=15490857},e}(egret.DisplayObjectContainer);__reflect(Block.prototype,"Block");var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i){function n(n){e.call(i,n,t)}if(RES.hasRes(t)){var r=RES.getRes(t);r?n(r):RES.getResAsync(t,n,this)}else RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var Main=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(t){})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return[4,this.loadResource()];case 1:return e.sent(),[4,RES.getResAsync("description_json")];case 2:return t=e.sent(),this.createGameScene(),[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return i.sent(),t=new LoadingUI,this.stage.addChild(t),[4,this.loadTheme()];case 2:return i.sent(),[4,RES.loadGroup("preload",0,t)];case 3:return i.sent(),this.stage.removeChild(t),[3,5];case 4:return e=i.sent(),[3,5];case 5:return[2]}})})},e.prototype.loadTheme=function(){var t=this;return new Promise(function(e,i){var n=new eui.Theme("resource/default.thm.json",t.stage);n.addEventListener(eui.UIEvent.COMPLETE,function(){e()},t)})},e.prototype.createGameScene=function(){var t=this.stage.stageWidth,e=this.stage.stageHeight;Utils.getInstance().setStage(t,e),this.addChild(new HomeScene);var i=RES.getRes("leaftexiao_png"),n=RES.getRes("leaftexiao_json");this.systemLeaf=new particle.GravityParticleSystem(i,n),this.addChild(this.systemLeaf),this.systemLeaf.start()},e}(eui.UILayer);__reflect(Main.prototype,"Main");var DebugPlatform=function(){function t(){}return t.prototype.setShare=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.setGold=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.setSkinsStatus=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.setSkinsOpen=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.bannerAdShow=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.getSkinsList=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.bannerAdHide=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.videoLife=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.linkApp=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.gameShare=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.getUserUid=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.setScore=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.groupRankShare=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.getShareTicket=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.vibrateShort=function(){},t.prototype.request=function(t){},t.prototype.setStorageSync=function(t,e){},t.prototype.getStorageSync=function(t){},t.prototype.showModal=function(t){},t.prototype.showToast=function(t){},t.prototype.clubCreate=function(){},t.prototype.clubShow=function(){},t.prototype.clubHide=function(){},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,n){function r(t){e.call(n,t)}function o(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),i.call(n))}var a=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){e.call(n,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(t,i){window.JSONParseClass.setData(t),egret.callLater(function(){e.call(n,generateEUI2)},a)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(t.indexOf(".exml")>-1){var s=t.split("/");s.pop();var c=s.join("/")+"_EUI.json";generateJSON.paths[t]?egret.callLater(function(){e.call(n,generateJSON.paths[t])},this):RES.getResByUrl(c,function(i){window.JSONParseClass.setData(i),egret.callLater(function(){e.call(n,generateJSON.paths[t])},a)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){e.call(n,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(t,r,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var Utils=function(){function t(){this.UIWidth=750,this.UIHeight=1334,this.stageWidth=750,this.stageHeight=1334,this.scale=1,this.forbidBgm=!1,this.userInfo={},this.inlineInfo={},this.localBaseData="version3baseData",this.localUserInfo="version3userinfo",this.shareInfo={},this.BGMSTATUS_LOCAL="bgmstatus.local",this.USERINFO_LOCAL="userinfo.local"}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.setShareTicket=function(t){this.shareInfo=t},t.prototype.setStage=function(t,e){this.stageWidth=t,this.stageHeight=e,this.scale=e/this.UIHeight},t.prototype.initAudio=function(){var t=platform.getStorageSync(this.BGMSTATUS_LOCAL);void 0==t||""==t||null==t?this.forbidBgm=!1:this.forbidBgm=!0},t.prototype.closeAudio=function(){platform.setStorageSync(this.BGMSTATUS_LOCAL,!0),this.initAudio()},t.prototype.openAudio=function(){platform.setStorageSync(this.BGMSTATUS_LOCAL,!1),this.initAudio()},t.prototype.initGame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.updateGame=function(t){},t.prototype.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},t.prototype.setUserScore=function(t){var e=wx.getOpenDataContext();e.postMessage({isDisplay:!0,type:"setscore",score:""+t})},t.prototype.setImageColor=function(t,e){var i=function(t){var e={r:-1,g:-1,b:-1};return e.b=t%256,e.g=Math.floor(t/256)%256,e.r=Math.floor(t/256/256),e},n=i(e),r=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];r[0]=n.r/255,r[6]=n.g/255,r[12]=n.b/255;var o=new egret.ColorMatrixFilter(r);t.filters=[o]},t.prototype.BtnMode=function(t,e){function i(t){var e=t.currentTarget;egret.Tween.get(e).to({scaleX:.9*n,scaleY:.9*n},100,egret.Ease.backOut).to({scaleX:n,scaleY:n},250,egret.Ease.backOut)}var n=t.scaleX;t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2,t.x=t.x+this.GetWidth(t)/2,t.y=t.y+this.GetHeight(t)/2,e||(t.touchEnabled=!0,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,i,this),this.removedListeners(t,egret.TouchEvent.TOUCH_BEGIN,i,t))},t.prototype.removedListeners=function(t,e,i,n){t.once(egret.Event.REMOVED_FROM_STAGE,function(){t.removeEventListener(e,i,n)},n)},t.prototype.GetWidth=function(t,e){var i=t.width*t.scaleX;return e||(i=Math.abs(t.width*t.scaleX)),i},t.prototype.GetHeight=function(t,e){var i=t.height*t.scaleY;return e||(i=Math.abs(t.height*t.scaleY)),i},t}();__reflect(Utils.prototype,"Utils");var AnswerBtn=function(t){function e(e){var i=t.call(this)||this;return i.init(e),i}return __extends(e,t),e.prototype.init=function(t){this.bg=new egret.Shape,this.bg.graphics.lineStyle(2,4235007),this.bg.graphics.beginFill(4235007),this.bg.graphics.drawRoundRect(0,0,450,88,20,20),this.bg.graphics.endFill(),this.addChildAt(this.bg,0);var e=new egret.TextField;e.text=t.title,this.addChild(e),e.width=450,e.height=90,e.textAlign="center",e.verticalAlign="middle",e.textColor=16777215,this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.answer.bind(this,t),this)},e.prototype.answer=function(t){this.removeChild(this.bg),this.bg=new egret.Shape,t.type==t.success?(this.bg.graphics.lineStyle(2,16084076),this.bg.graphics.beginFill(16084076)):(this.bg.graphics.lineStyle(2,6799930),this.bg.graphics.beginFill(6799930)),this.bg.graphics.drawRoundRect(0,0,450,88,20,20),this.bg.graphics.endFill(),this.addChildAt(this.bg,0)},e}(egret.DisplayObjectContainer);__reflect(AnswerBtn.prototype,"AnswerBtn");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){var t=new egret.Shape;t.graphics.beginFill(7759486),t.graphics.drawRect(0,0,750,1624),this.addChild(t),this.progress=new egret.Shape,this.progress.graphics.lineStyle(2,3170563),this.progress.graphics.beginFill(3843514),this.progress.graphics.drawRoundRect(160,805,0,20,16,16),this.addChild(this.progress),this.loadingTitle=new egret.TextField,this.addChild(this.loadingTitle),this.loadingTitle.y=850,this.loadingTitle.width=750,this.loadingTitle.height=100,this.loadingTitle.size=24,this.loadingTitle.textColor=4039616,this.loadingTitle.textAlign="center"},e.prototype.onProgress=function(t,e){var i=Math.floor(t/e*100);this.progress.graphics.clear(),this.progress.graphics.lineStyle(2,3170563),this.progress.graphics.beginFill(3843514),this.progress.graphics.drawRoundRect(160,805,430*i/100,20,16,16),this.loadingTitle.text="资源加载中..."+i+"%"},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var BoomAni=function(t){function e(){var e=t.call(this)||this;e.triangleArr=[],e.width=300,e.height=300,e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2;for(var i=0;30>i;i++){var n=new egret.Shape;n.graphics.beginFill(16719872),n.graphics.drawRect(0,0,20,20),n.anchorOffsetX=n.width/2,n.anchorOffsetY=n.height/2,e.addChild(n),e.triangleArr.push(n)}return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,e.offAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(){for(var t=0;t<this.triangleArr.length;t++){var e=this.triangleArr[t];e.x=this.width/2,e.y=this.height/2,e.scaleX=e.scaleY=.5+1.5*Math.random(),e.alpha=1-.4*Math.random(),e.rotation=0,egret.Tween.get(e).wait(200).to({alpha:0},200+200*Math.random()),egret.Tween.get(e).wait(100).to({rotation:(2*Math.round(Math.random())-1)*(180+360*Math.random()),x:this.width/2+(2*Math.round(Math.random())-1)*(100+300*Math.random()),y:this.height/2+(2*Math.round(Math.random())-1)*(100+300*Math.random())},500).call(function(t){this.parent.removeChild(this)},this)}},e.prototype.offAddToStage=function(){for(var t=0;t<this.triangleArr.length;t++){var e=this.triangleArr[t];egret.Tween.removeTweens(e)}},e}(egret.Sprite);__reflect(BoomAni.prototype,"BoomAni");var ModalComponent=function(t){function e(e){void 0===e&&(e=1);var i=t.call(this)||this;return i.type=1,i.address=[{id:1,name:"居无飘索",condition:""},{id:1,name:"西村",condition:"完成第10关"},{id:1,name:"桃源镇",condition:"完成第20关"},{id:1,name:"蕲春乡",condition:"完成第60关"},{id:1,name:"谯县",condition:"完成第120关"},{id:1,name:"淮南郡",condition:"完成第200关"},{id:1,name:"白云城",condition:"完成第500关"},{id:1,name:"京城",condition:"完成第1000关"}],i.interest=[{id:1,name:"小乞丐",condition:""},{id:1,name:"小书生",condition:"完成第1关"},{id:1,name:"学究",condition:"完成第16关"},{id:1,name:"秀才",condition:"完成第44关"},{id:1,name:"举人",condition:"完成第100关"},{id:1,name:"探花",condition:"完成第160关"},{id:1,name:"榜眼",condition:"完成第240关"},{id:1,name:"状元郎",condition:"完成第340关"},{id:1,name:"主簿",condition:"完成第400关"},{id:1,name:"知县",condition:"完成第460关"}],i.type=e,i}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},e.prototype.init=function(){this.height=Utils.getInstance().stageHeight,1==this.type?this.titleLabel.text="广阔天地，大有作为":this.titleLabel.text="朝为田舍郎，暮登天子堂";var t=1==this.type?this.address:this.interest,e=new eui.Scroller;e.width=580,e.height=720,e.scrollPolicyV="on";var i=new eui.Group,n=new eui.List;n.dataProvider=new eui.ArrayCollection(t),n.itemRenderer=listRender,i.addChild(n),e.viewport=i,this.contentPanel.addChild(e),Utils.getInstance().BtnMode(this.closeBtn),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this)},e.prototype.close=function(){var t=this.parent;t&&t.removeChild(this)},e}(eui.Component);__reflect(ModalComponent.prototype,"ModalComponent",["eui.UIComponent","egret.DisplayObject"]);var listRender=function(t){function e(){var e=t.call(this)||this;return e.width=580,e.height=120,e}return __extends(e,t),e.prototype.link=function(){},e.prototype.dataChanged=function(){var t=new egret.Shape;t.graphics.beginFill(15724527),t.graphics.lineStyle(4,131586),t.graphics.drawRoundRect(4,4,572,100,20,20),t.graphics.endFill(),this.addChild(t),this.nameLabel=new egret.TextField,this.nameLabel.text=this.data.name,this.addChild(this.nameLabel),this.nameLabel.textColor=757184,this.nameLabel.bold=!0,this.nameLabel.size=42,this.nameLabel.height=108,this.nameLabel.verticalAlign="middle",this.nameLabel.x=50,this.conditionLabel=new egret.TextField,this.conditionLabel.text=this.data.condition,this.addChild(this.conditionLabel),this.conditionLabel.textColor=10066329,this.conditionLabel.bold=!0,this.conditionLabel.size=26,this.conditionLabel.height=108,this.conditionLabel.verticalAlign="middle",this.conditionLabel.x=350},e}(eui.ItemRenderer);__reflect(listRender.prototype,"listRender");var Recommend=function(t){function e(e){void 0===e&&(e=1);var i=t.call(this)||this;return i.type=1,i.scale=1,i.moreStatus=1,i.moreBtn=null,i.moreOpenImg=null,i.moreCloseImg=null,i.moreList=[{imgUrl:"fang1_png",appid:"wx4d47d933c489d74c",name:"墨鱼2048"},{imgUrl:"fang2_png",appid:"wxbbfb4a9483e0cac9",name:"小鸟飞游戏"},{imgUrl:"fang3_png",appid:"wxb8e63ee17a923254",name:"新2048"},{imgUrl:"fang4_png",appid:"wx7dd7d9de4733c06e",name:"新消消乐"},{imgUrl:"fang5_png",appid:"wx71fcfde4d87fe441",name:"攀登珠峰"},{imgUrl:"fang6_png",appid:"wx42abe9fda2e107ee",name:"吃鸡"},{imgUrl:"fang7_png",appid:"wx10706652b31e1cfd",name:"吃鸡"}],i.likeList=[{imgUrl:"fang3_png",appid:"wxb8e63ee17a923254",name:"新2048"},{imgUrl:"fang2_png",appid:"wxbbfb4a9483e0cac9",name:"小鸟飞游戏"},{imgUrl:"fang4_png",appid:"wx7dd7d9de4733c06e",name:"新消消乐"},{imgUrl:"fang5_png",appid:"wx71fcfde4d87fe441",name:"攀登者游戏"}],i.type=e,i.x=-660,i.scale=Utils.getInstance().scale,i.y=266*i.scale,i.createScene(),i}return __extends(e,t),e.prototype.createScene=function(){1==this.type?this.createMore():this.createLike()},e.prototype.createLike=function(){this.x=30,this.y=1100*this.scale;var t=new egret.Shape;t.graphics.beginFill(16513003,.5),t.graphics.lineStyle(3,13861693),t.graphics.drawRoundRect(0,0,690,184,10,10),this.addChild(t);var e=new egret.TextField;e.width=690,e.textAlign="center",e.y=-30,e.x=0,e.size=44,e.textColor=15724527,e.stroke=2,e.strokeColor=3894992,e.text="猜你喜欢",this.addChild(e);for(var i=this.likeList,n=i.length,r=0;n>r;r++){var o=new egret.Bitmap;o.texture=RES.getRes(i[r].imgUrl),o.x=160*r+45,o.width=120,o.height=120,o.y=32,o.touchEnabled=!0,o.addEventListener(egret.TouchEvent.TOUCH_TAP,this.linkMini.bind(this,i[r].appid),this),this.addChild(o)}},e.prototype.createMore=function(){this.moreOpenImg=RES.getRes("more-one_png"),this.moreCloseImg=RES.getRes("more-two_png"),this.x=-660,this.y=266*this.scale;var t=new egret.Shape;t.graphics.lineStyle(3,13861693),t.graphics.beginFill(16513003),t.graphics.drawRoundRect(2,2,646,600,10,10),t.graphics.endFill(),this.addChild(t),this.initImgs(),this.moreBtn=new egret.Bitmap,this.moreBtn.texture=this.moreOpenImg,this.moreBtn.y=26*this.scale,this.moreBtn.x=650,this.addChild(this.moreBtn),this.moreBtn.touchEnabled=!0,this.moreBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.moreHandle,this)},e.prototype.initImgs=function(){for(var t=this.moreList,e=this.moreList.length,i=0;e>i;i++){var n=new egret.Bitmap;n.texture=RES.getRes(t[i].imgUrl),n.x=i%4*155+30,n.width=120,n.height=120,n.y=30+160*Math.floor(i/4),n.touchEnabled=!0,n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.linkMini.bind(this,t[i].appid),this),this.addChild(n)}},e.prototype.linkMini=function(t){platform.linkApp(t)},e.prototype.moreHandle=function(){var t=this.moreStatus;if(1==t){var e=egret.Tween.get(this);e.to({x:-660},100).wait(0),e.to({x:0},100).wait(300),this.moreStatus=2,this.moreBtn.texture=this.moreCloseImg}else{var e=egret.Tween.get(this);e.to({x:0},100).wait(0),e.to({x:-660},100).wait(300),this.moreStatus=1,this.moreBtn.texture=this.moreOpenImg}},e}(eui.Component);__reflect(Recommend.prototype,"Recommend",["eui.UIComponent","egret.DisplayObject"]);var CreateData=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e}(eui.Component);__reflect(CreateData.prototype,"CreateData",["eui.UIComponent","egret.DisplayObject"]);var GameScene=function(t){function e(){var e=t.call(this)||this;return e.blockArray=[],e.checkArray=[],e.emptyArray=[],e.data=[{list:[{id:1,txt:"杳",type:2,col:1,row:2},{id:2,txt:"无",type:1,col:2,row:2},{id:4,txt:"信",type:1,col:4,row:2},{id:5,txt:"容",type:1,col:3,row:3},{id:6,txt:"宛",type:2,col:3,row:4},{id:8,txt:"转",type:1,col:4,row:4},{id:9,txt:"悠",type:1,col:5,row:4},{id:10,txt:"扬",type:2,col:6,row:4},{id:11,txt:"斗",type:1,col:6,row:1},{id:12,txt:"志",type:1,col:6,row:2},{id:13,txt:"昂",type:2,col:6,row:3},{id:14,txt:"首",type:1,col:7,row:3},{id:15,txt:"挺",type:2,col:8,row:3},{id:16,txt:"胸",type:1,col:9,row:3},{id:3,txt:"音",type:2,col:3,row:2},{id:17,txt:"身",type:1,col:8,row:4},{id:18,txt:"而",type:2,col:8,row:5},{id:19,txt:"出",type:1,col:8,row:6},{id:20,txt:"入",type:1,col:5,row:6},{id:21,txt:"不",type:2,col:6,row:6},{id:22,txt:"敷",type:2,col:7,row:6},{id:23,txt:"近",type:2,col:6,row:7},{id:24,txt:"人",type:1,col:6,row:8},{id:25,txt:"情",type:1,col:6,row:9},{id:26,txt:"成",type:1,col:5,row:8},{id:27,txt:"之",type:2,col:7,row:8},{id:28,txt:"美",type:2,col:8,row:8},{id:7,txt:"在",type:1,col:3,row:5}]}],e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},e.prototype.init=function(){for(var t=this.data[0].list,e=t.length,i=0;e>i;i++){var n=t[i],r=new Block(n);this.blockPanel.addChild(r),r.x=45+80*(n.col-1),r.y=45+80*(n.row-1),this.blockArray.push(r),2==n.type&&this.checkArray.push(n),r.touchEnabled=!0,r.addEventListener(egret.TouchEvent.TOUCH_TAP,this.blockClick.bind(this,r),this)}var o=this.checkArray.length;if(o>0)for(var i=0;o>i;i++){var n=this.checkArray[i];n.type=1;var r=new Block(n);this.checkPanel.addChild(r),r.x=50+i%8*88,r.y=88*Math.floor(i/8),r.touchEnabled=!0,r.addEventListener(egret.TouchEvent.TOUCH_TAP,this.checkClick.bind(this,r),this)}this.writeReady()},e.prototype.initCheck=function(){for(var t=this.blockArray.length,e=0;t>e;e++)6==this.blockArray[e].type&&(this.blockArray[e].type=2,this.blockArray[e].changeType(2))},e.prototype.blockClick=function(t){var e=t.type;switch(e){case 2:this.initCheck(),t.changeType(6);break;case 3:t.empty(t),this.cancelCheck(t);break;case 4:t.empty(t),this.cancelCheck(t)}},e.prototype.cancelCheck=function(t){var e=this.checkArray.length;if(e>0)for(var i=function(e){var i=n.checkArray[e];if(i.id==t.id){i.type=1;var r=new Block(i);n.checkPanel.addChild(r),r.x=50+e%8*88,r.y=88*Math.floor(e/8),r.scaleX=.1,egret.Tween.get(r).to({scaleX:1,scaleY:1},150).call(function(t){egret.Tween.removeTweens(r),r.scaleX=1,r.scaleY=1}),r.touchEnabled=!0,r.addEventListener(egret.TouchEvent.TOUCH_TAP,n.checkClick.bind(n,r),n),n.initCheck(),n.writeReady()}},n=this,r=0;e>r;r++)i(r)},e.prototype.checkClick=function(t){var e=this,i=this.blockArray.length;egret.Tween.get(t).to({scaleX:1.2,scaleY:1.2},150).to({scaleX:1,scaleY:1},150).call(function(n){t.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.checkClick.bind(e,t),e),e.checkPanel.removeChild(t);for(var r=0;i>r;r++)if(6==e.blockArray[r].type)return e.blockArray[r].write(t),e.judgeNeat(e.blockArray[r]),void e.writeReady()})},e.prototype.decide=function(){for(var t=this.blockArray.length,e=0;t>e;e++);},e.prototype.writeReady=function(){var t=this.blockArray.length;if(t>0)for(var e=0;t>e;e++)if(2==this.blockArray[e].type)return this.blockArray[e].type=6,void this.blockArray[e].changeType(6)},e.prototype.judgeNeat=function(t){for(var e=this.blockArray.length,i=t.col,n=t.row,r=[],o=[],a=0;e>a;a++)this.blockArray[a].row==n&&(r.push(this.blockArray[a].col),o.push(this.blockArray[a]));r.sort(function(t,e){return e>t?-1:t>e?1:0}),o.sort(function(t,e){return t.col<e.col?-1:t.col>e.col?1:0});for(var s=-1,c=(o.length,r.length),h=0;4>h;h++)for(var l=i-h,p=l+1,d=p+1,u=d+1,a=0;c>a;a++)r.indexOf(l)>-1&&r.indexOf(p)>-1&&r.indexOf(d)>-1&&r.indexOf(u)>-1&&(s=r.indexOf(l));if(s>-1){for(var g=s,f=g+3,y=o.length,m=[],a=0;y>a;a++)a>=g&&f>=a&&m.push(o[a]);if(4==m.length){for(var v=!0,a=0;4>a;a++)2==m[a].type&&(v=!1);if(v){for(var w=!0,a=0;4>a;a++)m[a].isSuccess()||(w=!1);if(w)for(var _=function(t){egret.Tween.get(m[t]).to({scaleX:1,scaleY:1},100*t+10).to({scaleX:1.1,scaleY:1.1},100).to({scaleX:1,scaleY:1},10).call(function(e){m[t].success(),egret.Tween.removeTweens(m[t])})},a=0;4>a;a++)_(a);else for(var b=function(t){var e=m[t];egret.Tween.get(e).to({x:e.x-4},20).to({x:e.x},20).to({x:e.x+4},20).to({x:e.x},20).call(function(e){egret.Tween.removeTweens(m[t])}),3==m[t].type&&m[t].fail()},a=0;4>a;a++)b(a)}}}for(var x=[],T=[],a=0;e>a;a++)this.blockArray[a].col==i&&(x.push(this.blockArray[a].row),T.push(this.blockArray[a]));x.sort(function(t,e){return e>t?-1:t>e?1:0}),T.sort(function(t,e){return t.row<e.row?-1:t.row>e.row?1:0});for(var S=-1,h=(T.length,0);4>h;h++)for(var l=n-h,p=l+1,d=p+1,u=d+1,a=0;a<x.length;a++)x.indexOf(l)>-1&&x.indexOf(p)>-1&&x.indexOf(d)>-1&&x.indexOf(u)>-1&&(S=x.indexOf(l));if(S>-1){for(var g=S,f=g+3,C=T.length,A=[],a=0;C>a;a++)a>=g&&f>=a&&A.push(T[a]);if(4==A.length){for(var v=!0,a=0;4>a;a++)2==A[a].type&&(v=!1);if(v){for(var w=!0,a=0;4>a;a++)A[a].isSuccess()||(w=!1);if(w)for(var k=function(t){egret.Tween.get(A[t]).to({scaleX:1,scaleY:1},100*t+10).to({scaleX:1.1,scaleY:1.1},100).to({scaleX:1,scaleY:1},10).call(function(e){A[t].success(),egret.Tween.removeTweens(A[t])})},a=0;4>a;a++)k(a);else for(var L=function(t){var e=A[t];egret.Tween.get(e).to({x:e.x-4},20).to({x:e.x},20).to({x:e.x+4},20).to({x:e.x},20).call(function(e){egret.Tween.removeTweens(A[t])}),3==A[t].type&&A[t].fail()},a=0;4>a;a++)L(a)}}}},e.prototype.click=function(){for(var t=this,e=function(e){egret.Tween.get(i.blockArray[e]).to({scaleX:1,scaleY:1},100*e+10).to({scaleX:1.1,scaleY:1.1},100).to({scaleX:1,scaleY:1},10).call(function(i){t.blockArray[e].success()})},i=this,n=0;9>n;n++)e(n)},e.prototype.boom=function(t){},e}(eui.Component);__reflect(GameScene.prototype,"GameScene",["eui.UIComponent","egret.DisplayObject"]);var HomeScene=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},e.prototype.init=function(){this.height=Utils.getInstance().stageHeight,Utils.getInstance().BtnMode(this.startBtn),this.roleBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openIntro.bind(this,2),this),this.startBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.start,this)},e.prototype.start=function(){var t=this.parent;t&&(t.removeChild(this),t.addChild(new GameScene))},e.prototype.openIntro=function(t){this.addChild(new ModalComponent(t))},e}(eui.Component);__reflect(HomeScene.prototype,"HomeScene",["eui.UIComponent","egret.DisplayObject"]);var RankScene=function(t){function e(){var e=t.call(this)||this;return e.isdisplay=!1,e.rankData=null,e.type="friend",e}return __extends(e,t),e.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.createScene()},e.prototype.createScene=function(){var t=Utils.getInstance().stageHeight;this.height=t,this.createRank()},e.prototype.createRank=function(){if(this.isdisplay)this.bitmap.parent&&this.bitmap.parent.removeChild(this.bitmap),this.rankingListMask.parent&&this.rankingListMask.parent.removeChild(this.rankingListMask),this.isdisplay=!1;else{var t=wx.getOpenDataContext();this.rankData=new egret.BitmapData(window.sharedCanvas),this.rankData.$deleteSource=!1;var e=new egret.Texture;e._setBitmapData(this.rankData),this.bitmap=new egret.Bitmap(e),this.bitmap.width=Utils.getInstance().stageWidth,this.bitmap.height=Utils.getInstance().stageHeight,this.addChild(this.bitmap);this.type;egret.startTick(this.updatarank,this),this.isdisplay=!0,"friend"==this.type?t.postMessage({isDisplay:this.isdisplay,type:"friend",scale:Utils.getInstance().scale}):t.postMessage({isDisplay:this.isdisplay,type:"group",shareInfo:Utils.getInstance().shareInfo,scale:Utils.getInstance().scale})}},e.prototype.updatarank=function(){return egret.WebGLUtils.deleteWebGLTexture(this.rankData.webGLTexture),this.rankData.webGLTexture=null,!1},e.prototype.share=function(){platform.gameShare()},e.prototype.release=function(){egret.stopTick(this.updatarank,this)},e.prototype.close=function(){var t=this.parent;t.removeChild(this)},e}(eui.Component);__reflect(RankScene.prototype,"RankScene",["eui.UIComponent","egret.DisplayObject"]);